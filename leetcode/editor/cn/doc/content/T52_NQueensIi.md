<p><strong>n&nbsp;çš‡åé—®é¢˜</strong> ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† <code>n</code>&nbsp;ä¸ªçš‡åæ”¾ç½®åœ¨ <code>n Ã— n</code> çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚</p>

<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œè¿”å› <strong>n çš‡åé—®é¢˜</strong> ä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚</p>

<p>&nbsp;</p>

<div class="original__bRMd"> 
 <div> 
  <p><strong>ç¤ºä¾‹ 1ï¼š</strong></p> 
  <img alt="" src="https://assets.leetcode.com/uploads/2020/11/13/queens.jpg" style="width: 600px; height: 268px;" /> 
  <pre>
<strong>è¾“å…¥ï¼š</strong>n = 4
<strong>è¾“å‡ºï¼š</strong>2
<strong>è§£é‡Šï¼š</strong>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
</pre> 
 </div>
</div>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 1
<strong>è¾“å‡ºï¼š</strong>1
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>1 &lt;= n &lt;= 9</code></li> 
</ul>

<div><li>ğŸ‘ 535</li><li>ğŸ‘ 0</li></div>


å¥½çš„ï¼Œé’ˆå¯¹ä½ åˆšæ‰çš„è¦æ±‚ï¼š**è¿”å› N çš‡åé—®é¢˜çš„ä¸åŒè§£æ³•çš„æ•°é‡**ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç°æœ‰çš„ä»£ç ï¼Œå»é™¤è¿”å›è§£çš„è¿‡ç¨‹ï¼Œè€Œä»…ç»Ÿè®¡è§£çš„æ•°é‡ã€‚

å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦ï¼š

1. åœ¨å›æº¯çš„è¿‡ç¨‹ä¸­ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆè§£æ—¶ï¼Œ**å¢åŠ ä¸€ä¸ªè®¡æ•°å™¨**ã€‚
2. ä¿ç•™æ£‹ç›˜çš„å›æº¯è¿‡ç¨‹ï¼Œä½†ä¸éœ€è¦å°†è§£è½¬åŒ–ä¸º `List<String>`ï¼Œåªéœ€è¦ç»Ÿè®¡è§£çš„æ•°é‡ã€‚

### ä¿®æ”¹åçš„ä»£ç ï¼š

```java
package leetcode.editor.cn;

// Java: N çš‡åII

import java.util.ArrayList;
import java.util.List;

public class T51_NQueens {
    public static void main(String[] args) {
        Solution solution = new T51_NQueens().new Solution();
        // TO TEST
        System.out.println(solution.totalNQueens(4)); // è¾“å‡ºè§£æ³•æ•°é‡
        System.out.println(solution.totalNQueens(1)); // è¾“å‡ºè§£æ³•æ•°é‡
    }

    //leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int totalNQueens(int n) {
        // ç”¨æ¥è®°å½•æ¯ä¸€è¡Œçš‡åæ‰€åœ¨çš„åˆ—ï¼Œd[i] = j è¡¨ç¤ºç¬¬ i è¡Œçš‡åæ”¾åœ¨ç¬¬ j åˆ—
        int[] d = new int[n];

        // å›æº¯è®¡æ•°å™¨
        int[] count = new int[1]; // ç”¨æ•°ç»„åŒ…è£¹ï¼Œä»¥ä¾¿åœ¨å›æº¯è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¿®æ”¹å€¼

        // å¼€å§‹å›æº¯ï¼Œåˆå§‹åŒ–ä»ç¬¬ 0 è¡Œå¼€å§‹
        backtrack(0, n, d, count);
        
        // è¿”å›è§£çš„æ•°é‡
        return count[0];
    }

    // å›æº¯å‡½æ•°ï¼Œå°è¯•åœ¨ç¬¬ row è¡Œæ”¾ç½®çš‡å
    private void backtrack(int row, int n, int[] d, int[] count) {
        // å¦‚æœå½“å‰è¡Œå·²ç»æ”¾ç½®å®Œæ‰€æœ‰çš‡åï¼Œè¯´æ˜ä¸€ä¸ªè§£å·²ç»å®Œæˆ
        if (row == n) {
            // å¢åŠ è®¡æ•°
            count[0]++;
            return;
        }

        // å°è¯•åœ¨ç¬¬ row è¡Œçš„æ¯ä¸€åˆ—æ”¾ç½®çš‡å
        for (int col = 0; col < n; col++) {
            // æ£€æŸ¥å½“å‰åˆ—å’Œå¯¹è§’çº¿æ˜¯å¦å®‰å…¨
            if (isSafe(row, col, d)) {
                // æ”¾ç½®çš‡å
                d[row] = col;

                // é€’å½’æ”¾ç½®ä¸‹ä¸€è¡Œçš„çš‡å
                backtrack(row + 1, n, d, count);

                // å›æº¯ï¼Œæ’¤é”€æ”¾ç½®çš„çš‡å
                d[row] = 0;
            }
        }
    }

    // æ£€æŸ¥å½“å‰æ”¾ç½®æ˜¯å¦å®‰å…¨ï¼Œå³æ£€æŸ¥åˆ—å’Œä¸¤æ¡å¯¹è§’çº¿
    private boolean isSafe(int row, int col, int[] d) {
        for (int i = 0; i < row; i++) {
            // æ£€æŸ¥åˆ—æ˜¯å¦æœ‰çš‡å
            if (d[i] == col) {
                return false;
            }
            // æ£€æŸ¥æ˜¯å¦ä¸ä¹‹å‰çš„çš‡ååœ¨åŒä¸€å¯¹è§’çº¿
            if (i - d[i] == row - col || i + d[i] == row + col) {
                return false;
            }
        }
        return true;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
}
```

### è§£é‡Šï¼š

1. **è®¡æ•°å™¨ `count`**ï¼š
    - æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `count[1]` æ¥å­˜å‚¨è§£æ³•çš„æ•°é‡ã€‚é€šè¿‡ä½¿ç”¨æ•°ç»„å¯ä»¥åœ¨å›æº¯çš„è¿‡ç¨‹ä¸­ä¿®æ”¹å…¶å€¼ã€‚
    - æ¯å½“æˆ‘ä»¬æ”¾ç½®å®Œæ‰€æœ‰çš‡åï¼ˆå³ `row == n` æ—¶ï¼‰ï¼Œå°±å°† `count[0]` è‡ªå¢ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†ä¸€ä¸ªæœ‰æ•ˆè§£ã€‚

2. **å›æº¯å‡½æ•° `backtrack`**ï¼š
    - `row` è¡¨ç¤ºå½“å‰è¦æ”¾ç½®çš‡åçš„è¡Œã€‚
    - åœ¨æ¯ä¸€è¡Œï¼Œæˆ‘ä»¬å°è¯•å°†çš‡åæ”¾ç½®åˆ°æ¯ä¸€åˆ—ï¼ˆ`col`ï¼‰ï¼Œå¹¶é€šè¿‡ `isSafe` å‡½æ•°æ£€æŸ¥è¯¥åˆ—å’Œä¸¤æ¡å¯¹è§’çº¿æ˜¯å¦æ²¡æœ‰å…¶ä»–çš‡åã€‚
    - å¦‚æœå¯ä»¥æ”¾ç½®çš‡åï¼Œæˆ‘ä»¬é€’å½’åˆ°ä¸‹ä¸€è¡Œã€‚
    - å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªè§£ï¼ˆå³æˆåŠŸæ”¾ç½®äº†æ‰€æœ‰çš„çš‡åï¼‰ï¼Œå°±å¢åŠ è®¡æ•°å™¨ã€‚
    - å¦‚æœé€’å½’å®Œæˆï¼Œæˆ‘ä»¬æ’¤é”€æ”¾ç½®çš„çš‡åï¼Œå›æº¯åˆ°ä¸Šä¸€è¡Œç»§ç»­å°è¯•å…¶ä»–å¯èƒ½çš„è§£ã€‚

3. **`isSafe` å‡½æ•°**ï¼š
    - è¯¥å‡½æ•°ç”¨äºæ£€æŸ¥å½“å‰è¡Œå’Œåˆ—æ”¾ç½®çš„çš‡åæ˜¯å¦å®‰å…¨ã€‚å³ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–çš‡ååœ¨åŒä¸€åˆ—æˆ–å¯¹è§’çº¿ä¸Šã€‚

### ç¤ºä¾‹ï¼š

å¯¹äºè¾“å…¥ `n = 4`ï¼Œå›æº¯çš„è¿‡ç¨‹ä¼šæ‰¾åˆ°ä¸¤ä¸ªä¸åŒçš„è§£æ³•ï¼Œè¿”å›çš„è§£æ³•æ•°é‡æ˜¯ `2`ï¼š

```
è¾“å…¥: n = 4
è¾“å‡º: 2
```

å¯¹äºè¾“å…¥ `n = 1`ï¼Œç”±äºæ£‹ç›˜åªæœ‰ä¸€ä¸ªæ ¼å­ï¼Œå”¯ä¸€çš„è§£æ˜¯æ”¾ç½®ä¸€ä¸ªçš‡åï¼Œè¿”å›çš„è§£æ³•æ•°é‡æ˜¯ `1`ï¼š

```
è¾“å…¥: n = 1
è¾“å‡º: 1
```

### æ—¶é—´å¤æ‚åº¦ï¼š
- ç”±äºå›æº¯çš„è¿‡ç¨‹ä¸­æ¯ä¸€è¡Œéƒ½å¯ä»¥å°è¯•æ”¾ç½® `n` ä¸ªçš‡åï¼Œæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(n!)`ã€‚
